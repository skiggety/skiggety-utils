#!/usr/bin/env bash

# This script encourages you to check your calendar.

. $SKIGGETY_UTILS_DIR/lib/skiggety-utils.bash || exit 1

MESSAGE='Look at your calendar, make sure you are doing the right thing (and use "firstlife-reminder-countdown" in another window if you need a reminder)'
WITH_REWARD_ARG=''
while [[ "$1" == -* ]]; do
    if [ "$1" == "--with-reward" ]; then
        WITH_REWARD_ARG="$1"
        shift
    elif [ "$1" == "-m" ]; then
        shift
        MESSAGE="$1"
        shift
    fi
done

open 'https://www.google.com/calendar/render' 2>/dev/null & # TODO^2: UN-HARDCODE
firstlife-delegate $WITH_REWARD_ARG "$MESSAGE" \
    || exit_with_error "did not check calendar for the following purpose: $MESSAGE"
