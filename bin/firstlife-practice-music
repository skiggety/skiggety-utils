#!/usr/bin/env bash

# This script opens up a custom playlist of music to practice along with.

. $SKIGGETY_UTILS_DIR/lib/skiggety-utils.bash || exit 1
# TODO^120: (IN_PROGRESS, NOW) MOVE this script to zerothlife
. $ZEROTHLIFE_CODE_DIR/lib/zerothlife.bash || exit_with_error "could not source zerothlife.bash"

debug_here
zerothlife-preempt-same-script

zerothlife_exit_if_needed

zerothlife-wait-for-user
# TODO^12: IF YOU CAN SEE THIS, VOTE for a TODO, this is also your opportunity to try to correct issues you know # about.
$EDITOR $0 # TODO^11: DELETE when this is done needing some specific attention
zerothlife_exit_if_needed

# TODO^19: subject to configuration if you have a max times per day number set, exit this script early if you already have the reward logged for this script enough times today.  In other words, only allow this script to run twice a day

firstlife-alarm "Hooray! Time to practice your musical instrument!"
zerothlife_exit_if_needed
shellask "Are you ready to practice your musical instrument?" || exit_with_error "Decided not to practice music"

# TODO^68: organize this script with several short pomodoros, maybe randomly selct between different options, or
# alternate, or make different routines, maybe even use many short pomodoros without breaks for small steps..

# CAPTURE INSPIRATION
firstlife-mute --time-in-seconds 60
firstlife-delegate 'Pick up your instrument and play something without thinking about it'
zerothlife_exit_if_needed
firstlife-mute --time-in-seconds 30
firstlife-delegate 'Tune your instrument' || exit_with_error "Didn't tune"
firstlife-mute --time-in-seconds 300
firstlife-delegate 'Did you play anything original & interesting? write it down or record it if there is anything to record'
zerothlife_exit_if_needed

# USE PRACTICE DECK
# TODO^22: find or invent an excercise you can do on your instrument (maybe make this a card instead of a todo)
# (actually make this a card)
# - TODO: try out the exercise
# - TODO^2: write down the exercise on a single notecard and add it to your practice deck
# TODO^35: shuffle your practice deck and deal yourself two more cards, and do those two exercises
# TODO: any other ideas for practice exercises? You can add them to your deck now, if you want.
# TODO^4: put away your practice deck
zerothlife_exit_if_needed

# BAND PREPAREDNESS
firstlife-pomodoro --time-in-minutes 10 --without-break "Prepare for your next band practice, making sure lead sheets are ready" || exit_with_error "Didn't prep for band practice"
zerothlife_exit_if_needed

# TODO^31: also put your next album playlist in config and prompt user to use it
# TODO^17: record anything new and original for your own, configurable, youtube playlist to draft out your next solo album
# - TODO^30: pop open that playlist
# - TODO^24: firstlife-delegate "Work on your solo album, going for as many songs as possible with good recordings and lead sheets in order
zerothlife_exit_if_needed

zl-config-ensure MUSIC_PRACTICE_PLAY_LINK
. $ZEROTHLIFE_CONFIG
if [ -n "$MUSIC_PRACTICE_PLAY_LINK" ]; then
    open "$MUSIC_PRACTICE_PLAY_LINK" 2>/dev/null &
fi
firstlife-pomodoro --time-in-minutes 20 --without-break "Practice along with your playlist" || exit_with_error "didn't practice with playlist"

firstlife-reward "practiced a musical instrument"
zerothlife_exit_if_needed
