#!/usr/bin/env bash

# This script prompts you to do something from your 'vital' todo list, based on a tag

. $SKIGGETY_UTILS_DIR/lib/skiggety-utils.bash || exit 1

TAG="IN_PROGRESS"
if ! [[ -z "$1" ]]; then
    TAG="$1"
    shift
fi

# TODO^7: accept an optianal tag for vital, like "URGENT", "NOW", or "FUN".  Pick randomly from vital tasks
# with the tag, weighted towards the ones with the most votes, and ask the user to get it done or at least put in a
# pomodoro's worth of time. Maybe pass a '--random' option to 'firstlife-iterate-on-vital' or
# 'firstlife-iterate-on-vital-tag'

debug_eval TAG
firstlife-iterate-on-vital-tag -n 1 $TAG || \
    firstlife-delegate "Work on something from your 'vital' todo list tagged '$TAG'" || \
    exit_with_error "skipped doing something tagged '$TAG' from your 'vital' todo list."
