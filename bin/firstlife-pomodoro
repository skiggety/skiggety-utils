#!/usr/bin/env bash

# This script coordinates one pomodoro for you

# EASY TODO^86: use this script more often, maybe against your todo list
# - EASY TODO^97: (POINT) successful pomodoros should keep log and count and show score, so I can count them and confirm I'm doing them consistently
# - EASY TODO^46: also, count POINTs similarly from lines with 'POINT' in todays todo file.

# TODO^8?: exit early if you've done enough pomodoros in a day
# TODO?: maybe accept a '--without-reward' option

. $SKIGGETY_UTILS_DIR/lib/skiggety-utils.bash || exit 1

shellask "Ready to start a pomodoro for '$*' ?" || exit_with_error "skipped POMODORO for $*"

# EASY TODO^11: or should this be done right in the terminal with sleep-verbose or firstlife-break instead of youtube and shellask:
open 'https://youtu.be/ddL3y1saEJs?si=UjSZicdCMYsVoIjV&t=00' 2>/dev/null & # generic 25 minute timer on youtube
task_description="do a POMODORO: $*"
firstlife-delegate --with-reward "$task_description" || exit_with_error "skipped pomodoro for: $*"

firstlife-log --type pomodoro "$task_description" # TODO^98: (EASY, FUN) display this output and productivity point count in firstlife-status like we do with rewards

# TODO?: or should this be a 5-minute timer from youtube?:
# EASY TODO^23: break should be optional with '--without-break'
firstlife-break -t 300
