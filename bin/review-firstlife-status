#!/usr/bin/env bash

# This script continuously monitors firstlife progess, and can be used in a side terminal to watch the points rack up

. $SKIGGETY_UTILS_DIR/lib/skiggety-utils.bash || exit 1
. $SKIGGETY_UTILS_DIR/lib/firstlife.bash || exit_with_error 'could not use common firstlife code'

# TODO: make a template for setting up variables like BEDTIME after which firstlife-status should just fail and this script should exit

cd $FIRSTLIFE_DIR

# TODO: implement terminal sizing for other os'es:
# TODO^4: set to preferences from config template:
if is_on_mac_os; then
    osascript -e "tell application \"Terminal\" to set the font size of front window to 11"
    # for 13 in macbook: osascript -e 'tell application "Terminal" to set bounds of front window to {9, 552, 719, 900}'
    # To find your preference, resize a window to your liking and run: osascript -e 'tell application "Terminal" to get bounds of front window'
    osascript -e 'tell application "Terminal" to set bounds of front window to {10, 681, 1000, 1046}'
fi

echo $$ > $FIRSTLIFE_MARKER_DIR/.review-firstlife-status_PID

firstlife-status && clear && review -u 5 -m 30 --while firstlife-status --while-review-pid-latest $$
