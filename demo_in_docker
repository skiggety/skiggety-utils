#!/usr/bin/env bash

# Safely try out a docker container with skiggety utils installed, to see what it's like
# without affecting your machine
#
# TODO^16: IMPLEMENT (IN_PROGRESS, with Kevin's involvement)

THIS_DIR="$(cd "$(dirname $BASH_SOURCE)";pwd)"
SKIGGETY_UTILS_DIR="$THIS_DIR"
. $SKIGGETY_UTILS_DIR/lib/skiggety-utils.bash
SKIGGETY_DEBUG=true

# Work on this script with Kevin so he can be up and running to test todo:

# TODO: ./installers/docker || exit_with_error "Could not install Docker"

cd $SKIGGETY_UTILS_DIR || exit_with_error "Could not find \$SKIGGETY_UTILS_DIR"

docker build -t skiggety-utils-box --progress plain . || exit_with_error "docker build failed"

ls
echo "Run ./start"
echo "...then run 'exec bash' to get new prompt"
echo "read README.md"

docker run --rm -it --entrypoint bash -v $SKIGGETY_UTILS_DIR:/code/skiggety-utils skiggety-utils-box # TODO^2: mount volume

# TODO: run a shell with a helpful intro message in the docker container

# TODO: after you implement this, figure out what the shortest one liner is to checkout skiggety utils, and run this
# script.
